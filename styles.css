:root{
  --ink: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.72);

  /* MORE RED, less pink */
  --red: #ff0018;
  --redDeep: #b30022;

  --royal: "Cinzel", ui-serif, Georgia, serif;
  --serif: "Playfair Display", ui-serif, Georgia, serif;
  --ui: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --mono: "IBM Plex Mono", ui-monospace, Menlo, Monaco, Consolas, monospace;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:#000;
  color:var(--ink);
  font-family:var(--ui);
  overflow-x:hidden;
}
main{ padding-top:62px; }

/* Top bar */
.topBar{
  position:fixed; top:0; left:0; right:0;
  z-index:50;
  display:flex; justify-content:space-between; align-items:flex-start;
  padding: 12px 14px;
  background: linear-gradient(180deg, rgba(0,0,0,.78), rgba(0,0,0,0));
  backdrop-filter: blur(10px);
}
.brand{
  font-family: var(--royal);
  font-weight:900;
  letter-spacing:.18em;
  text-transform:uppercase;
  font-size:12px;
  opacity:.9;
  margin-top:2px;
}
.miniCounters{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
.miniC{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  border-radius: 14px;
  padding:10px;
  min-width:160px;
}
.miniC .k{ font-size:10.5px; letter-spacing:.14em; text-transform:uppercase; color: rgba(255,255,255,.58); }
.miniC .v{ margin-top:6px; font-weight:900; font-size:13px; }

/* Calm Mode floating button */
.calmFab{
  position: fixed;
  right: 14px;
  bottom: 14px;
  z-index: 9200;
  border:1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(10px);
  color: rgba(255,255,255,.92);
  padding: 12px 14px;
  border-radius: 999px;
  font-weight: 900;
  cursor:pointer;
}

/* Loader */
.loader{
  position:fixed; inset:0;
  background: rgba(0,0,0,.72);
  backdrop-filter: blur(10px);
  display:grid; place-items:center;
  z-index: 9500;
}
.loader.hidden{ display:none; }
.loaderBox{
  width:min(540px,92vw);
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  border-radius:18px;
  padding:16px;
}
.loaderTitle{ font-family: var(--royal); letter-spacing:.06em; font-weight:900; }
.loaderBar{ margin-top:12px; height:10px; border-radius:999px; background: rgba(255,255,255,.08); overflow:hidden; }
.loaderFill{ height:100%; width:0%; background: linear-gradient(90deg, rgba(255,0,24,.92), rgba(179,0,34,.92)); }
.loaderPct{ margin-top:10px; font-weight:900; color: rgba(255,255,255,.72); }
.loaderSmall{ margin-top:6px; font-size:12.5px; color: rgba(255,255,255,.55); }

/* Hearts */
#hearts{
  position:fixed; inset:0;
  z-index: 7000;
  pointer-events:none;
  overflow:hidden;
}
.heart{
  position:absolute;
  top:-120px;
  font-size: 40px;
  width:40px; height:40px;
  color: var(--redDeep);
  opacity:.92;
  filter:
    drop-shadow(0 0 8px rgba(255,0,24,.60))
    drop-shadow(0 0 18px rgba(179,0,34,.28));
  animation: fall var(--dur) linear var(--delay) forwards;
}
@keyframes fall{
  0%{ transform: translate(var(--x), -120px) rotate(0deg); }
  100%{ transform: translate(calc(var(--x) + var(--drift)), calc(100vh + 160px)) rotate(320deg); }
}

/* Poster */
.poster{
  position:relative;
  min-height: 100vh;
  overflow:hidden;
  border-bottom: 1px solid rgba(255,255,255,.10);
}
.sky{
  position:absolute; inset:0;
  background-size: cover;
  background-position: center;
  transform: scale(1.06);
  filter: saturate(1.2) contrast(1.03);
  opacity: 0.96;
  z-index: 1;
  animation: skyDrift 18s ease-in-out infinite;
}
@keyframes skyDrift{
  0%{ transform: scale(1.08) translate3d(-1.2%, -0.8%, 0); }
  50%{ transform: scale(1.09) translate3d(1.2%, 0.6%, 0); }
  100%{ transform: scale(1.08) translate3d(-1.2%, -0.8%, 0); }
}
.vignette{
  position:absolute; inset:0;
  background: radial-gradient(900px 600px at 50% 40%, rgba(0,0,0,0), rgba(0,0,0,.55) 70%, rgba(0,0,0,.9) 100%);
  z-index: 2;
  pointer-events:none;
}
.grain{
  position:absolute; inset:0;
  z-index: 3;
  pointer-events:none;
  opacity: .10;
  background-image:
    repeating-radial-gradient(circle at 20% 20%, rgba(255,255,255,.20) 0 1px, rgba(0,0,0,0) 1px 4px),
    repeating-radial-gradient(circle at 80% 40%, rgba(255,255,255,.14) 0 1px, rgba(0,0,0,0) 1px 5px);
  mix-blend-mode: overlay;
  filter: blur(.2px);
}
.clouds{
  position:absolute; inset:-10%;
  z-index: 4;
  background:
    radial-gradient(650px 280px at 20% 35%, rgba(255,255,255,.08), rgba(0,0,0,0) 65%),
    radial-gradient(760px 320px at 70% 55%, rgba(255,255,255,.06), rgba(0,0,0,0) 70%),
    radial-gradient(650px 280px at 45% 70%, rgba(255,255,255,.05), rgba(0,0,0,0) 70%);
  filter: blur(18px);
  opacity: .92;
  animation: clouds 14s ease-in-out infinite;
  pointer-events:none;
}
@keyframes clouds{
  0%{ transform: translate3d(-2%, 0, 0); }
  50%{ transform: translate3d(2%, -1.5%, 0); }
  100%{ transform: translate3d(-2%, 0, 0); }
}

/* Constellation */
.constellation{ position:absolute; inset:0; z-index: 6; pointer-events:none; }
.constellationSvg{ width:100%; height:100%; opacity: .80; }
.cDots circle,
.nameStars circle{
  fill: rgba(255,255,255,.90);
  filter: drop-shadow(0 0 10px rgba(255,255,255,.22));
  animation: twinkle 2.8s ease-in-out infinite;
}
.nameStars circle:nth-child(3n){ animation-delay: .7s; }
.nameStars circle:nth-child(4n){ animation-delay: 1.2s; }
@keyframes twinkle{ 0%,100%{ opacity:.55; } 50%{ opacity:1; } }

.cLines{
  fill:none;
  stroke: rgba(255,255,255,.16);
  stroke-width: 1.8;
}

/* Reveal line */
.revealLine{
  position:absolute;
  left:50%;
  top: 70%;
  transform: translate(-50%,-50%) scale(.98);
  z-index: 34;
  width: min(720px, 92vw);
  padding: 12px 14px;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.34);
  backdrop-filter: blur(10px);
  font-family: var(--serif);
  color: rgba(255,255,255,.92);
  text-align:center;
  line-height: 1.45;
  opacity: 0;
  pointer-events:none;
  transition: opacity 420ms ease, transform 420ms ease;
}
.revealLine.show{ opacity: 1; transform: translate(-50%,-50%) scale(1); }

/* Thread */
.threadSvg{
  position:absolute; inset:0;
  width:100%; height:100%;
  z-index: 22;
  pointer-events:none;
}
.thread{
  fill:none;
  stroke: var(--red);
  stroke-width: 4.8;
  stroke-linecap: round;
  stroke-linejoin: round;
  filter: url(#threadGlow);
  opacity: 0;
}
.laser{ stroke-width: 3.8; }
.wrap{ stroke-width: 3.2; stroke-dasharray: 8 14; }
.knot{ stroke-width: 3.8; }

body.holding #laserL,
body.holding #laserR,
body.holding #tangle{
  opacity: 0.98;
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: draw 650ms ease forwards;
}
body.connected #tangle{ opacity:0; }
body.connected #laserL,
body.connected #laserR{ opacity:0; }

body.connected #clean,
body.connected #wrap,
body.connected #knotHeart{
  opacity: 1;
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: draw 650ms ease forwards;
}
body.connected #wrap{ animation: draw 650ms ease forwards, dashMove 1100ms linear infinite; }

@keyframes draw{ to{ stroke-dashoffset: 0; } }
@keyframes dashMove{ to{ stroke-dashoffset: -220; } }

/* Characters */
.sceneChars{ position:absolute; inset:0; z-index: 25; pointer-events:none; }
.sil{
  position:absolute;
  bottom: 11%;
  width: min(260px, 34vw);
  height:auto;
  opacity: .98;
  filter: drop-shadow(0 18px 44px rgba(0,0,0,.55));
  will-change: transform, opacity;
}
.boy{ left: 6%; }
.girl{ right: 6%; }
.hug{
  left:50%;
  transform: translateX(-50%);
  bottom: 12%;
  width: min(340px, 46vw);
  z-index: 28;
}
.hidden{ opacity:0; pointer-events:none; }

.run{
  animation-duration: 1.30s;
  animation-fill-mode: forwards;
  animation-timing-function: cubic-bezier(.2,.92,.2,1);
  opacity: 1;
}
#boyRun{ animation-name: runBoy; }
#girlRun{ animation-name: runGirl; }
@keyframes runBoy{ from{ transform: translate3d(0,0,0); } to{ transform: translate3d(44vw,0,0); } }
@keyframes runGirl{ from{ transform: translate3d(0,0,0); } to{ transform: translate3d(-44vw,0,0); } }
body.holding #boyRun, body.holding #girlRun{ opacity:1; }
body:not(.holding) #boyRun, body:not(.holding) #girlRun{ animation:none; }
body.connected #boyRun, body.connected #girlRun{ opacity:0 !important; }
body.connected #hugSil{ opacity:1 !important; }

/* BOOM */
.flareCross{
  position:absolute; left:50%; top:55%;
  transform: translate(-50%,-50%);
  z-index: 40; opacity: 0; pointer-events:none;
}
.flareCross::before,
.flareCross::after{
  content:"";
  position:absolute; left:50%; top:50%;
  transform: translate(-50%,-50%);
  background: rgba(255,255,255,0.88);
  filter: blur(1px);
}
.flareCross::before{ width: 10px; height: 320px; }
.flareCross::after{ width: 320px; height: 10px; }

.whiteFlash{ position:absolute; inset:0; background: rgba(255,255,255,0.96); opacity:0; z-index:45; pointer-events:none; }

.loveBubble{
  position:absolute; left:50%; top:55%;
  width: 240px; height:240px;
  border-radius: 999px;
  transform: translate(-50%,-50%) scale(.6);
  opacity:0; z-index:44; pointer-events:none;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.20), rgba(255,0,24,0.10) 35%, rgba(255,0,24,0) 70%);
  border: 2px solid rgba(255,0,24,0.78);
}
.loveBubble::after{
  content:"‚ù§";
  position:absolute; left:50%; top:50%;
  transform: translate(-50%,-50%);
  font-size: 66px;
  color: rgba(255,0,24,0.98);
}

body.boom .flareCross{ opacity:1; animation: flarePop 520ms ease forwards; }
body.boom .whiteFlash{ animation: flash 420ms ease; }
body.boom .loveBubble{ animation: bubblePop 720ms cubic-bezier(.18,.9,.25,1) forwards; }

@keyframes flarePop{ 0%{ transform: translate(-50%,-50%) scale(0.6); opacity:0; } 30%{ opacity:1; } 100%{ transform: translate(-50%,-50%) scale(1.18); opacity:0; } }
@keyframes flash{ 0%{ opacity:0; } 20%{ opacity:1; } 100%{ opacity:0; } }
@keyframes bubblePop{ 0%{ opacity:0; transform: translate(-50%,-50%) scale(.55); } 35%{ opacity:1; transform: translate(-50%,-50%) scale(1.18); } 70%{ opacity:.95; transform: translate(-50%,-50%) scale(1.0); } 100%{ opacity:0; transform: translate(-50%,-50%) scale(1.40); } }

/* Sparks */
.sparks{ position:absolute; inset:0; z-index:46; pointer-events:none; }
.spark{
  position:absolute;
  width:6px; height:6px;
  border-radius:999px;
  background: rgba(255,0,24,0.92);
  filter: drop-shadow(0 0 10px rgba(255,0,24,0.55));
  opacity:0;
  animation: spark 900ms ease-out forwards;
}
@keyframes spark{
  0%{ opacity:0; transform: translate3d(0,0,0) scale(.6); }
  20%{ opacity:1; }
  100%{ opacity:0; transform: translate3d(var(--dx), var(--dy),0) scale(1.1); }
}

/* Text + thumb UI */
.heroText{
  position:absolute;
  left: 18px; top: 18px;
  z-index: 31;
  max-width: 760px;
  padding-top: 56px;
}
.headline{
  font-family: var(--royal);
  font-size: clamp(28px, 4.8vw, 62px);
  line-height: 1.02;
  letter-spacing: .04em;
  text-shadow: 0 18px 60px rgba(0,0,0,.55);
}
.subline{
  margin-top: 10px;
  color: var(--muted);
  font-size: 14.5px;
  letter-spacing: .02em;
  font-weight: 600;
}
.thumbUI{
  position:absolute;
  left:50%;
  top: 55%;
  transform: translate(-50%,-50%);
  z-index: 33;
  display:grid;
  justify-items:center;
  gap: 12px;
  width: min(580px, 92vw);
  text-align:center;
}
.thumbHint{ font-weight: 900; color: rgba(255,255,255,.92); }
.thumbSmall{ color: rgba(255,255,255,.55); font-size: 12.5px; }
.audioHint{
  color: rgba(255,255,255,.70);
  font-size: 12.5px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  padding: 8px 10px;
  border-radius: 999px;
}
.audioHint.hidden{ display:none; }
.afterHint{
  margin-top: 10px;
  color: rgba(255,255,255,.82);
  font-size: 13px;
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;
}
.afterHint.hidden{ display:none; }
.replayBtn{
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.9);
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 900;
  cursor:pointer;
}
.thumbHit{
  width: 150px; height: 150px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.22);
  display:grid;
  place-items:center;
  position:relative;
  overflow:hidden;
  touch-action: none;
  user-select: none;
}
.ring{
  position:absolute; inset:0;
  width:100%; height:100%;
  transform: rotate(-90deg);
}
.ringBase{ fill:none; stroke: rgba(255,255,255,.16); stroke-width: 6; }
.ringProg{
  fill:none;
  stroke: rgba(255,0,24,.98);
  stroke-width: 6;
  stroke-linecap: round;
  stroke-dasharray: 289;
  stroke-dashoffset: 289;
  filter: drop-shadow(0 0 12px rgba(255,0,24,.52));
  will-change: stroke-dashoffset;
}
.scanSweep{
  position:absolute;
  inset:-30%;
  border-radius: 999px;
  background: conic-gradient(from 0deg, rgba(255,0,24,0) 0deg, rgba(255,0,24,.25) 25deg, rgba(255,255,255,.14) 35deg, rgba(255,0,24,0) 60deg);
  opacity: 0;
  filter: blur(1px);
  mix-blend-mode: screen;
  animation: sweep 1.1s linear infinite;
}
@keyframes sweep{ to{ transform: rotate(360deg); } }
.fpSvg{ width: 72px; height: 72px; z-index:2; }
.fpPath{ stroke-dasharray: 200; stroke-dashoffset: 200; will-change: stroke-dashoffset; }
.pulse{
  position:absolute;
  inset: 18px;
  border-radius:999px;
  border: 1px solid rgba(255,0,24,.42);
  opacity: .55;
  animation: pulse 1.4s ease-in-out infinite;
}
@keyframes pulse{
  0%{ transform: scale(0.96); opacity: .35; }
  50%{ transform: scale(1.03); opacity: .85; }
  100%{ transform: scale(0.96); opacity: .35; }
}
body.holding .thumbHit .scanSweep{ opacity: .85; }

.scrollNudge{
  position:absolute;
  left:50%;
  bottom: 14px;
  transform: translateX(-50%);
  z-index: 35;
  width: 42px; height: 42px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.22);
  display:grid; place-items:center;
  color: rgba(255,255,255,.65);
  animation: nudge 1.6s ease-in-out infinite;
}
@keyframes nudge{
  0%,100%{ transform: translateX(-50%) translateY(0); opacity:.6; }
  50%{ transform: translateX(-50%) translateY(-6px); opacity:1; }
}

/* Sections */
.memories, .openWhen, .storyMode, .timeline, .secretArea, .capsules, .thenNow, .finalTyping{
  padding: 80px 16px;
  max-width: 1100px;
  margin: 0 auto;
}
.titleSerif{
  font-family: var(--serif);
  font-size: clamp(26px, 4vw, 44px);
  margin: 0 0 14px;
  text-shadow: 0 16px 50px rgba(0,0,0,.55);
}
.noteLine{ color: rgba(255,255,255,.62); margin: 10px 0 14px; font-size: 13px; }

/* HER polaroids (premium) */
.herWrap{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  padding: 16px;
  margin-top: 16px;
}
.herWrap.hidden{ display:none; }
.herTitle{ font-family: var(--serif); font-size: 28px; }
.HER{ color: var(--red); border-bottom: 1px dashed rgba(255,0,24,.55); }
.rope{ height:2px; background: rgba(255,255,255,.22); margin: 14px 0 14px; }

.herGrid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}
@media(min-width: 620px){ .herGrid{ grid-template-columns: repeat(3, 1fr); } }
@media(min-width: 980px){ .herGrid{ grid-template-columns: repeat(5, 1fr); } }

.polItem{
  position:relative;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.92);
  padding: 10px 10px 26px; /* polaroid bottom */
  overflow:hidden;
  box-shadow:
    0 18px 55px rgba(0,0,0,.55),
    0 0 0 1px rgba(0,0,0,.18) inset;
  transform: rotate(var(--rot, 0deg));
  transition: transform 260ms ease, box-shadow 260ms ease;
}
.polItem:hover{
  transform: rotate(var(--rot, 0deg)) translateY(-2px) scale(1.01);
  box-shadow:
    0 22px 70px rgba(0,0,0,.60),
    0 0 0 1px rgba(255,0,24,.18) inset;
}
.polItem::before{
  content:"";
  position:absolute;
  left: 50%;
  top: -10px;
  width: 64px;
  height: 26px;
  transform: translateX(-50%) rotate(-4deg);
  background: rgba(255,255,255,.22);
  border:1px solid rgba(255,255,255,.22);
  border-radius: 10px;
  filter: blur(.0px);
  opacity: .75;
}
.polItem::after{
  content:"‚ù§";
  position:absolute;
  right: 10px;
  bottom: 6px;
  font-size: 14px;
  color: rgba(255,0,24,.70);
}

.polItem img{
  width:100%;
  height: 160px;
  object-fit: contain;       /* no crop */
  display:block;
  background: rgba(0,0,0,.12);
  border-radius: 12px;
}

/* US photos */
.photoGrid{
  margin-top: 18px;
  display:grid;
  grid-template-columns: 1fr;
  gap: 16px;
}
@media(min-width:900px){
  .photoGrid{ grid-template-columns: 1fr 1fr; }
}
.smartFrame{
  position:relative;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  overflow:hidden;
  height: 420px;
}
.smartBg{
  position:absolute; inset:0;
  background-position:center;
  background-size: cover;
  filter: blur(22px) saturate(1.25);
  transform: scale(1.15);
  opacity: .55;
}
.smartImg{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit: contain;
  padding: 14px;
}

/* Open When Vault */
.vaultGrid{
  display:grid;
  gap: 14px;
}
@media(min-width: 920px){
  .vaultGrid{ grid-template-columns: repeat(2, 1fr); }
}
.vaultCard{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  padding: 14px;
  cursor:pointer;
  position:relative;
  overflow:hidden;
}
.vaultCard::before{
  content:"‚úâ";
  position:absolute;
  right: 14px;
  top: 12px;
  font-size: 20px;
  opacity: .55;
}
.vaultK{
  font-size: 12px;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: rgba(255,255,255,.62);
}
.vaultT{
  margin-top: 8px;
  font-family: var(--serif);
  font-size: 22px;
}
.vaultMini{
  margin-top: 8px;
  color: rgba(255,255,255,.72);
  line-height: 1.65;
  font-size: 13.5px;
}

/* Story Mode (NO head cut) */
.storyMode.locked{ display:none; }
.storyTrack{
  margin-top: 16px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 22px;
  overflow: auto;
  height: min(74vh, 640px);
  scroll-snap-type: y mandatory;
}
.storySlide{
  position: relative;
  height: min(74vh, 640px);
  scroll-snap-align: start;
  overflow:hidden;
  border-bottom: 1px solid rgba(255,255,255,.08);
  background: #000;
}
.storyBg{
  position:absolute; inset:0;
  background-size: cover;
  background-position: center;
  filter: blur(18px) saturate(1.15);
  transform: scale(1.12);
  opacity: .55;
}
.storyImg{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit: contain;       /* IMPORTANT: full fit */
  object-position: center;
  padding: 18px 14px 84px;   /* space for captions */
  filter: saturate(1.05) contrast(1.02);
}
.storyShade{
  position:absolute; inset:0;
  background:
    linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.30) 55%, rgba(0,0,0,.86));
}
.storyCaption{
  position:absolute;
  left: 16px;
  right: 16px;
  bottom: 18px;
  z-index: 2;
  color: rgba(255,255,255,.92);
  text-shadow: 0 16px 50px rgba(0,0,0,.70);
}
.capMain{
  font-family: var(--serif);
  font-size: clamp(18px, 2.3vw, 28px);
  line-height: 1.20;
}
.capSub{
  margin-top: 8px;
  font-family: var(--ui);
  font-size: 13px;
  color: rgba(255,255,255,.74);
  line-height: 1.55;
}
.capTiny{
  margin-top: 8px;
  font-family: var(--ui);
  font-size: 12px;
  color: rgba(255,255,255,.62);
  letter-spacing: .02em;
}

/* Timeline + secret + modal + credits + kiss (same as v11, stable) */
.gameIntro{
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  padding: 14px;
}
.gameIntro p{ margin: 0 0 10px; color: rgba(255,255,255,.78); line-height: 1.7; }
.miniNote{ color: rgba(255,255,255,.62); font-size: 13px; }
.progressRow{ display:flex; gap: 10px; flex-wrap:wrap; margin-top:10px; }
.progressPill{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  border-radius: 999px;
  padding: 8px 10px;
  font-weight: 900;
  font-size: 12.5px;
}
.progressPill.ghost{ opacity: .8; }

.timelineCards{ display:grid; gap: 14px; margin-top: 14px; }
.tCard{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 16px;
  padding: 14px;
  position:relative;
  overflow:hidden;
}
.lockBadge{
  position:absolute; top: 12px; right: 12px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.28);
  border-radius: 999px;
  padding: 8px 10px;
  font-size: 12px;
  color: rgba(255,255,255,.75);
}
.tDate{ font-size: 12px; letter-spacing: .14em; text-transform: uppercase; color: rgba(255,255,255,.62); }
.tTitle{ font-family: var(--serif); font-size: 22px; margin: 8px 0 6px; }
.tDesc{ color: rgba(255,255,255,.78); line-height: 1.7; }
.tCard.locked .tDesc{ filter: blur(10px); opacity: .35; user-select:none; }
.tCard.locked::after{
  content:"Tap to unlock";
  position:absolute; left:14px; bottom:12px;
  color: rgba(255,255,255,.62);
  font-size: 12.5px;
}
.tCard.unlocked{ box-shadow: 0 0 0 1px rgba(255,0,24,.22) inset; }

.secretArea.locked{ display:none; }
.secretLetter{
  position:relative;
  margin-top: 14px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  padding: 16px;
  overflow:hidden;
}
.secretGlow{
  position:absolute; inset:-30%;
  background: radial-gradient(circle at 50% 40%, rgba(255,0,24,.12), rgba(0,0,0,0) 60%);
  filter: blur(18px);
}
.gujLetter{
  position:relative;
  z-index:2;
  color: rgba(255,255,255,.86);
  line-height: 1.85;
  font-size: 15.5px;
  white-space: pre-wrap;
  font-family: var(--ui);
}
.secretTools{
  position:relative;
  z-index:2;
  margin-top: 12px;
  display:flex;
  flex-wrap:wrap;
  gap: 10px;
}
.bucket{
  margin-top: 18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  padding: 16px;
}
.bucketTitle{ font-family: var(--serif); margin: 0 0 10px; font-size: 22px; }
.bucketList{ margin:0; padding-left:18px; color: rgba(255,255,255,.82); line-height: 1.8; }
.bucketList li strong{ color: rgba(255,0,24,.95); }
.secretCTA{ margin-top: 16px; display:flex; justify-content:flex-start; }

.ctaBtn{
  border:1px solid rgba(255,0,24,.35);
  background: rgba(255,0,24,.12);
  color: rgba(255,255,255,.92);
  padding: 12px 14px;
  border-radius: 14px;
  font-weight: 900;
  cursor:pointer;
}
.ghostBtn{
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.04);
  color: rgba(255,255,255,.88);
  padding: 12px 14px;
  border-radius: 14px;
  font-weight: 900;
  cursor:pointer;
}

/* Capsules */
.capsuleGrid{
  margin-top: 10px;
  display:grid;
  gap: 14px;
}
@media(min-width: 920px){
  .capsuleGrid{ grid-template-columns: repeat(3, 1fr); }
}
.capsuleCard{
  position:relative;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.03);
  border-radius: 18px;
  padding: 14px;
  overflow:hidden;
  cursor:pointer;
  min-height: 220px;
}
.capsuleTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.capsuleTitle{ font-family: var(--serif); font-size: 20px; margin: 0; }
.capsulePill{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.22);
  border-radius: 999px;
  padding: 8px 10px;
  font-size: 12px;
  font-weight: 900;
  color: rgba(255,255,255,.78);
  white-space:nowrap;
}
.capsuleDate{
  margin-top: 8px;
  font-size: 12px;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: rgba(255,255,255,.62);
}
.capsuleBody{
  margin-top: 10px;
  color: rgba(255,255,255,.80);
  line-height: 1.7;
  font-size: 13.5px;
  white-space: pre-wrap;
  max-height: 0;
  overflow:hidden;
  transition: max-height 360ms ease;
}
.capsuleCard.open .capsuleBody{ max-height: 1200px; }
.capsuleLockNote{ margin-top: 10px; color: rgba(255,255,255,.62); font-size: 12.5px; }
.capsuleSeal{
  position:absolute;
  right:-50px;
  top:-50px;
  width: 140px;
  height: 140px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.10), rgba(255,0,24,.18), rgba(0,0,0,0) 70%);
  border: 1px solid rgba(255,0,24,.22);
  transform: rotate(12deg);
  opacity: .9;
}
.capsuleCard.locked .capsuleBody{ filter: blur(10px); }

/* Then&Now */
.thenSub{
  color: rgba(255,255,255,.72);
  margin: 6px 0 14px;
  font-size: 13.5px;
  letter-spacing: .02em;
}
.reveal{
  position:relative;
  border:1px solid rgba(255,255,255,.12);
  border-radius: 22px;
  overflow:hidden;
  margin-top: 18px;
}
.reveal img{ width:100%; height: 260px; object-fit: cover; display:block; }
.revealBottom{ position:absolute; inset:0; width:55%; overflow:hidden; }
.slider{ position:absolute; left: 12px; right: 12px; bottom: 12px; }

/* Final typing */
.finalTyping{
  background:#000;
  border-top: 1px solid rgba(255,255,255,.10);
  border-radius: 26px;
  padding: 120px 16px 160px;
  position:relative;
  overflow:hidden;
}
.finalWrap{ max-width: 920px; margin: 0 auto; position:relative; z-index: 2; }
.typeTarget{ margin:0; white-space: pre-wrap; font-family: var(--mono); font-size: clamp(16px, 2.1vw, 20px); line-height: 1.85; color: rgba(255,255,255,0.86); }
.caret{ display:inline-block; margin-left:2px; color: rgba(255,255,255,0.75); animation: blink 1.05s steps(1,end) infinite; }
@keyframes blink{ 50%{ opacity:0; } }

.fireworks{ position:absolute; inset:0; width:100%; height:100%; z-index: 1; pointer-events:none; opacity: .9; }
.fireworks.hidden{ display:none; }

/* Modals */
.modal, .vaultModal, .calmModal{
  position:fixed; inset:0;
  background: rgba(0,0,0,.78);
  backdrop-filter: blur(10px);
  display:grid; place-items:center;
  z-index: 9600;
}
.modal.hidden, .vaultModal.hidden, .calmModal.hidden{ display:none; }
.modalBox, .vaultBox, .calmBox{
  width:min(760px, 92vw);
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.06);
  border-radius: 18px;
  padding: 16px;
}
.modalTitle, .vaultTitle, .calmTitle{
  font-family: var(--royal);
  letter-spacing:.10em;
  text-transform: uppercase;
  font-weight: 900;
}
.modalQ{ margin-top:10px; color: rgba(255,255,255,.86); line-height: 1.7; }
.modalInput{
  margin-top: 12px;
  width: 100%;
  padding: 12px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.25);
  color: rgba(255,255,255,.92);
  outline:none;
  font-size: 15px;
}
.modalHint{
  margin-top: 10px;
  color: rgba(255,255,255,.78);
  border:1px dashed rgba(255,255,255,.14);
  background: rgba(255,255,255,.03);
  padding: 10px 12px;
  border-radius: 14px;
}
.modalHint.hidden{ display:none; }
.modalBtns{ margin-top: 12px; display:flex; gap: 10px; flex-wrap:wrap; }
.modalErr{ margin-top: 10px; color: rgba(255,140,140,.92); font-weight: 800; }

.vaultPromiseText{
  margin-top: 10px;
  color: rgba(255,255,255,.86);
  line-height: 1.7;
}
.vaultLetter.hidden{ display:none; }
.vaultBody, .calmText{
  margin-top: 10px;
  color: rgba(255,255,255,.88);
  line-height: 1.85;
  font-size: 15.5px;
  white-space: pre-wrap;
}
.vaultBtns, .calmBtns{
  margin-top: 12px;
  display:flex;
  gap: 10px;
  flex-wrap:wrap;
}
.calmSmall{
  margin-top: 10px;
  color: rgba(255,255,255,.58);
  font-size: 12.5px;
}

/* Credits */
.credits{
  position:fixed; inset:0;
  z-index: 9100;
  display:grid; place-items:center;
}
.credits.hidden{ display:none; }
.creditsShade{ position:absolute; inset:0; background: rgba(0,0,0,.88); }
.creditsRoll{
  position:absolute;
  bottom: -80%;
  width: min(720px, 92vw);
  text-align:center;
  color: rgba(255,255,255,.82);
  font-family: var(--royal);
  letter-spacing:.06em;
  animation: creditsUp 22s linear forwards;
}
@keyframes creditsUp{ to{ transform: translateY(-220%); } }
.cLine{ margin: 10px 0; }
.cLine.big{ font-size: 28px; letter-spacing:.12em; font-weight: 900; }
.cSpace{ height: 26px; }

/* Kiss outro */
.kissOutro{
  position:fixed; inset:0;
  z-index: 9050;
  display:grid; place-items:center;
  background:#000;
}
.kissOutro.hidden{ display:none; }
.kissBg{ position:absolute; inset:0; opacity: .22; background:
  radial-gradient(circle at 40% 35%, rgba(255,0,24,.18), rgba(0,0,0,0) 55%),
  radial-gradient(circle at 70% 65%, rgba(255,0,24,.12), rgba(0,0,0,0) 60%);
}
.kissBg::after{
  content:"üíã";
  position:absolute; left:50%; top:45%;
  transform: translate(-50%,-50%) rotate(-12deg);
  font-size: 180px;
  opacity: .28;
}
.kissCenter{ position:relative; z-index: 2; text-align:center; }
.bigHeart{ font-size: 120px; color: rgba(255,0,24,.98); filter: drop-shadow(0 0 18px rgba(255,0,24,.30)); }
.kissText{ margin-top:14px; font-family: var(--serif); font-size: 28px; line-height: 1.25; color: rgba(255,255,255,.92); }
.sig{ display:block; margin-top:10px; font-family: var(--royal); letter-spacing:.10em; text-transform: uppercase; font-size: 16px; opacity: .9; }

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .sky,.clouds,.scanSweep,.pulse,.creditsRoll,.heart{ animation: none !important; }
}

/* Print: only secret letter */
@media print{
  body{ background:#fff !important; color:#000 !important; }
  #hearts, .topBar, .calmFab, #poster, #memories, #openWhen, #storyMode, #timeline, #capsules, #thenNow, #finalTyping, #credits, #kissOutro, #modal, #vaultModal, #calmModal{
    display:none !important;
  }
  #secretArea{ display:block !important; padding:0 !important; max-width:100% !important; margin:0 !important; }
  .secretLetter{ border:0 !important; background: transparent !important; }
  .secretGlow, .secretTools, .bucket, .secretCTA{ display:none !important; }
  .gujLetter{ color:#000 !important; font-size: 13.5pt !important; line-height: 1.6 !important; }
}